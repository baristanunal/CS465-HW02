<!DOCTYPE html>
<html>

<head>
    <style>
        /* Add some basic styling to create columns */
        .slider-column {
            float: left;
            margin: 7px;
            border: 1px solid black;
            padding: 7px;
            font-size: 14px;
        }

        .slider-column .button {
            float: left;
            margin: 8px;
            border: 1px solid black;
            padding: 5px;
        }

        /* Style for the header */
        .leg-header {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Style for the container div */
        .container {
            border: 1px solid black;
        }

        /* Style for the canvas container */
        .canvas-container {
            width: 512px;
            height: 512px;
            border: 1px solid black;
        }

        .save-button {
            margin: 20px;
        }

        hr {
            display: block;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            margin-left: auto;
            margin-right: auto;
            border-style: inset;
            border-width: 1px;
        }
    </style>

<script id="vertex-shader" type="x-shader/x-vertex">
    attribute  vec4 vPosition;
    attribute  vec3 vNormal;
    varying vec4 fColor;
    
    uniform vec4 ambientProduct, diffuseProduct, specularProduct;
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;
    uniform vec4 lightPosition;
    uniform float shininess;
    void main()
    {
        vec3 pos = -(modelViewMatrix * vPosition).xyz;

        //fixed light postion
        
        vec3 light = lightPosition.xyz;
        vec3 L = normalize( light - pos );
    
        vec3 E = normalize( -pos );
        vec3 H = normalize( L + E );
        
        vec4 NN = vec4(vNormal,0);
    
        // Transform vertex normal into eye coordinates
           
        vec3 N = normalize( (modelViewMatrix*NN).xyz);
    
        // Compute terms in the illumination equation
        vec4 ambient = ambientProduct;
    
        float Kd = max( dot(L, N), 0.0 );
        vec4  diffuse = Kd*diffuseProduct;
    
        float Ks = pow( max(dot(N, H), 0.0), shininess );
        vec4  specular = Ks * specularProduct;
        
        if( dot(L, N) < 0.0 ) {
        specular = vec4(0.0, 0.0, 0.0, 1.0);
        } 
    
        gl_Position = projectionMatrix * modelViewMatrix * vPosition;
        fColor = ambient + diffuse +specular;
        
        fColor.a = 1.0;
    }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        varying vec4 fColor;
        void main() {
            gl_FragColor = fColor;
        }
    </script>

    <script type="text/javascript" src="../Common/webgl-utils.js"></script>
    <script type="text/javascript" src="../Common/InitShaders.js"></script>
    <script type="text/javascript" src="../Common/MV.js"></script>
    <script type="text/javascript" src="octopus.js"></script>
</head>

<body>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fetch saved animations from octopus.js
            var savedAnimations = getSavedAnimations();

            // Get the container to display saved animations
            var savedAnimationsContainer = document.getElementById('animation-list');

            // Function to update UI based on array changes
            function updateUI() {
                // Clear the existing content in the container
                savedAnimationsContainer.innerHTML = '';

                // Check if savedAnimations is not null and has at least one animation
                if (savedAnimations && savedAnimations.length > 0) {
                    // Loop through saved animations and create list items
                    savedAnimations.forEach(function (animation) {
                        var listItem = document.createElement('div');
                        // Add a class to the div
                        listItem.classList.add('saved-animation-item');
                        listItem.id = animation.name;

                        // Set text content
                        listItem.textContent = animation.name;

                        // Make the div clickable and assign an onClick function
                        listItem.style.cursor = 'pointer';
                        listItem.onclick = function () {
                            // Handle the click event, you can replace this with your own logic
                            console.log('Clicked on:', listItem.id);
                            alert('Selected the saved: ' + listItem.id);
                            updateSelectedSavedAnimation(listItem.id)

                        };

                        // Append the div to the container
                        savedAnimationsContainer.appendChild(listItem);
                    });
                } else {
                    // If there are no saved animations, display a message
                    console.log("No saved animations");
                    var listItem = document.createElement('div');
                    listItem.textContent = "No saved animations";
                    savedAnimationsContainer.appendChild(listItem);
                }
            }

            // Initial UI update
            updateUI();

            // Listen for the event and update UI
            document.addEventListener('savedAnimationsChanged', function () {
                // Update UI logic here
                getSavedAnimations();
                updateUI();
            });
        });
    </script>



    <div class="canvas-container">

        <canvas id="gl-canvas" width="512" height="512">
            Oops ... your browser doesn't support the HTML5 canvas element
        </canvas>


        <div class="slider-column">

            <div class="slider-column button">
                <div class="save-button">
                    <button id="save-animation-button">Save Animation To File</button>
                </div>

                <div class="save-button">
                    <button id="load-animation-button">Load Animation From File</button>
                </div>

                <div class="save-button">
                    <button id="random-animation-button">Generate Random Animation</button>
                </div>
            </div>

            <div class="slider-column button">

                <div class="save-button">
                    <button id="add-keyframe-button">Add Keyframe</button>
                </div>

                <div class="save-button">
                    <button id="delete-keyframe-button">Delete Last Keyframe</button>
                </div>

                <div class="save-button">
                    <button id="reset-button">Reset Keyframes</button>
                </div>
            </div>

            <div class="slider-column">
                <div class="save-button">
                    <button id="save-button">Save Animation To Program</button>
                </div>
            </div>

            <div class="slider-column">
                <div id="saved-animations-container" class="slider-column">
                    <div class="leg-header">Saved Animations</div>
                    <div id="animation-list"></div>
                </div>
            </div>

            <div class="slider-column">
                    Animation Duration (seconds)
                    <input id="animation-duration" type="number" min="1" max="10" step="1" value="1" />            
                <div class="save-button">
                    <button id="start-animation-button">Start Animation</button>                    
                </div>
                <div class="save-button">
                    <button id="pause-animation-button">Pause</button>                    
                </div>                
                
            </div>
        </div>

    </div>

    
    <div class="slider-column">
        <div id="slider25">
            <div class="leg-header">Head</div>
            head position x -15
            <input id="slide" type="range" min="-15" max="15" step="1" value="0" />
            15
        </div><br />
        <div id="slider26">
            head position y -15
            <input id="slide" type="range" min="-15" max="15" step="1" value="0" />
            15
        </div><br />
        <div id="slider0">
            head angle -180
            <input id="slide" type="range" min="-180" max="180" step="10" value="0" />
            180
        </div><br />

        <hr>

        <div class="leg-header">Leg 1</div>
        <div id="slider1">
            upper 1 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider9">
            middle 1 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider17">
            lower 1 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />

        <hr>

        <div class="leg-header">Leg 2</div>
        <div id="slider2">
            upper 2 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider10">
            middle 2 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider18">
            lower 2 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />

    </div>

    <div class="slider-column">
        <div class="leg-header">Leg 3</div>
        <div id="slider3">
            upper 3 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider11">
            middle 3 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider19">
            lower 3 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />

        <hr>
        <div class="leg-header">Leg 4</div>
        <div id="slider4">
            upper 4 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider12">
            middle 4 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider20">
            lower 4 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <hr>

        <div class="leg-header">Leg 5</div>
        <div id="slider5">
            upper 5 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider13">
            middle 5 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider21">
            lower 5 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
    </div>


    <div class="slider-column">

        <div class="leg-header">Leg 6</div>
        <div id="slider6">
            upper 6 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider14">
            middle 6 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider22">
            lower 6 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />

        <hr>
        <div class="leg-header">Leg 7</div>
        <div id="slider7">
            upper 7 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider15">
            middle 7 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider23">
            lower 7 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />

        <hr>
        <div class="leg-header">Leg 8</div>
        <div id="slider8">
            upper 8 angle 130
            <input id="slide" type="range" min="130" max="330" step="10" value="180" />
            330
        </div><br />
        <div id="slider16">
            middle 8 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />
        <div id="slider24">
            lower 8 angle -120
            <input id="slide" type="range" min="-120" max="120" step="10" value="0" />
            120
        </div><br />

    </div>

    <div class="slider-column">
        
        <div class="leg-header">Animation Speed</div>
        <div id="hz-selector">
            <label for="hz">Select Animation Speed:</label>
            <input type="range" id="hz" name="hz" min="10" max="120" step="10" value="60" oninput="updateSelectedValue(this.value)">
            <div id="selected-hz-value">Selected Value: 60 Hz (default)</div>
        </div>
    </div>
    
    <script>
        function updateSelectedValue(value) {
            document.getElementById("selected-hz-value").innerText = "Selected Value: " + value + " Hz";            
        }
    </script>
</body>

</html>